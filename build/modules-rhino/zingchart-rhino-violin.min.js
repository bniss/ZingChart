/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.0
*/
zingchart.setModule("violin"),zingchart.plugins.violin={},zingchart.bind(null,"dataparse",function(e,t){var i,r,a,n,l,o,s=zingchart.getLoader(e.id),h=zingchart.getModules(s);if(-1!==ZC.AT(h,"violin"))for(i=0,r=t.graphset.length;i<r;i++){var c,p,u=t.graphset[i].type,v=t.graphset[i];if("scatter"===u)v.type="mixed",c="varea",p="scatter";else{if("hscatter"!==u)return t;v.type="hmixed",c="area",p="hscatter"}t.graphset[i]["plugin-type"]=u;var g={};v.options&&(g=v.options.violin||v.options),ZC._todash_(g);var _=v.series||[];for(n=_.length-1;n>=0;n--)_[n].cls&&"zc-violin"===_[n].cls?_.splice(n,1):_[n]["o-values"]&&(_[n].values=[].concat(_[n]["o-values"]));var d=ZC._f_(ZC._c_(g.jitter,1)),f=ZC._f_(ZC._c_(g["rounding-factor"],1)),m=ZC._f_(ZC._c_(g["mean-factor"],2)),C=ZC._b_(ZC._c_(g.trim,!1)),Z=[];for(n=0;n<_.length;n++){var b={},A=[],x=[],z=_[n].values||[],M=[],y=[],k={},L=-Number.MAX_VALUE,E=Number.MAX_VALUE;for(o=0;o<z.length;o++){var N=z[o];-1===ZC.AT(y,N[0])&&y.push(N[0]),f<=0&&(f=1);var U;if(f<1){var V=1/f;U=Math.round(V*N[1])/V}else U=f*Math.round(N[1]/f);k[N[0]+"/"+U]=ZC._i_(k[N[0]+"/"+U]||"0"),k[N[0]+"/"+U]++,b[N[0]+"/"+U]=b[N[0]+"/"+U]||[],b[N[0]+"/"+U].push(N[1])}_[n].violin&&ZC._todash_(_[n].violin);var X=.05*d;for(l=0;l<y.length;l++){var w=[],T=[];L=-Number.MAX_VALUE,E=Number.MAX_VALUE;for(var j in k){var q=j.split("/"),B=ZC._f_(q[0]),D=ZC._f_(q[1]);if(y[l]===B){var F=k[j];for(a=0;a<F;a++)A.push(b[j][a]),x.push(B),M.push([B-X*F/2+a*X+X/2,D]);w.push([B-X*F/2-1.5*X,D]),T.push([B+X*F/2+1.5*X,D]),L=Math.max(L,D),E=Math.min(E,D)}}if(!C){var G=.2*(L-E);w.push([y[l],E-G],[y[l],L+G]),T.push([y[l],E-G],[y[l],L+G])}w.sort(function(e,t){return e[1]-t[1]}),T.sort(function(e,t){return t[1]-e[1]});var H,I=[],J=[],K=0,O=Number.MAX_VALUE,P=-1;for(a=0;a<w.length;a++)0===a||a===w.length-1?(a===w.length-1&&-1!==P&&(H=T.length-P-1,I.push([w[P][0],w[P][1]]),J.push([T[H][0],T[H][1]])),H=T.length-a-1,I.push([w[a][0],w[a][1]]),J.push([T[H][0],T[H][1]])):(w[a][0]<O&&(O=w[a][0],P=a),K===m&&(H=T.length-P-1,I.push([w[P][0],w[P][1]]),J.push([T[H][0],T[H][1]]),K=0,O=Number.MAX_VALUE,P=-1),K++);C&&(I.unshift([y[l],E]),I.push([y[l],L]),J.unshift([y[l],E]),J.push([y[l],L]));var Q={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:I,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,Q),ZC._cp_(_[n].violin,Q),Z.push(Q);var R={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:J,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,R),ZC._cp_(_[n].violin,R),Z.push(R)}_[n]["data-value"]=A,_[n]["data-key"]=x,_[n]["o-values"]=[].concat(_[n].values),_[n].type=p,_[n].values=M}v.series=[].concat(Z).concat(_)}return t}),zingchart.bind(null,"legend_item_click",function(e){var t=zingchart.getLoader(e.id),i=zingchart.getModules(t);if(-1!==ZC.AT(i,"violin")){var r=zingchart.exec(e.id,"getplotlength");zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*r/3)}),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*r/3)+1})}});